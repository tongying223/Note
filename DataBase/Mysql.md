# Mysql

> Mysql的日志文件

- redo log

  ```
  1.确保事务的持久性
  2.防止在发生故障的时间点，尚有脏页未写入磁盘，在重启mysql的时候，根据redo log进行重做，从而达到事务的持久性这一特征
  3.redo log是在事务的执行过程中，便开始写入redo log的
  ```

- undo log

  ```
  1.保存了事务发生之前的数据的一个版本，可以用于回滚，同时可以提供多版本并发控制下的读（即非锁定读）
  2.逻辑格式的日志，在执行undo的时候，仅仅是将数据从逻辑上恢复至事务之前的状态，而不是从物理页面上操作实现的，这一点是不同于redo log的。
  ```

- bin log

  ```
  1.用于复制，在主从复制中，从库利用主库上的binlog进行重播，实现主从同步
  2.用于数据的基于时间点的还原
  3.逻辑格式的日志，可以简单认为就是执行过的事务中的sql语句。
  4.事务提交的时候，一次性将事务中的sql语句（一个事务可能对应多个sql语句）按照一定的格式记录到binlog中。（与redo log不同）
  ```

> 什么是ACID的一致性？如何保证？

```
一致性：保证事务只能把数据库从一个有效（正确）的状态“转移”到另一个有效（正确）的状态。

正确状态：满足预先定义好的约束条件，如int型不能插入String，账户余额添加约束必须>=0等等，满足约束时合法的，不满足就是Illegal，回滚

应用层面的一致性：数据的合理性，在应用层去保障
```



